{% extends 'layout.html' %}

{% block title %}CrÃ©neaux â€” {{ event_date }}{% endblock %}

{% block content %}
  <h1>ğŸ—“ï¸ RÃ©servation de crÃ©neaux</h1>
  <p class="subtitle">{{ event_date }} â€” de 00:00 Ã  23:59 UTC</p>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, msg in messages %}
        <div class="flash {{ category }}">{{ msg }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <table>
    <thead>
      <tr><th>Heure (UTC)</th><th>Statut</th><th>Joueur</th><th>Action</th></tr>
    </thead>
    <tbody>
      {% for s in slots %}
      <tr>
        <td>{{ s.slot.strftime('%H:%M') }}</td>
        <td>
          {% if s.reserved %}
            <span class="badge reserve">RÃ©servÃ©</span>
          {% else %}
            <span class="badge libre">Libre</span>
          {% endif %}
        </td>
        <td>{{ s.player if s.player else 'â€”' }}</td>
        <td>
          {% if not s.reserved %}
            <a class="btn" href="{{ url_for('reserve') }}?slot={{ s.iso }}">RÃ©server</a>
          {% else %}
            â€”
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
