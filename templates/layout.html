<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}KINGSHOT{% endblock %}</title>
    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    {% if theme == 'christmas' %}
    <link rel="stylesheet" href="/static/style-christmas.css?v=6">
    <link rel="stylesheet" href="/static/compact.css?v=6">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ„</text></svg>">
    {% elif theme == 'cookies' %}
    <link rel="stylesheet" href="/static/style-cookies.css?v=6">
    <link rel="stylesheet" href="/static/compact.css?v=6">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸª</text></svg>">
    {% else %}
    <link rel="stylesheet" href="/static/style.css?v=6">
    <link rel="stylesheet" href="/static/compact.css?v=6">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ‘‘</text></svg>">
    {% endif %}
  </head>
  <body>
    {% if theme == 'christmas' %}
    <!-- Snowflakes -->
    <div class="snowflake" style="left: 5%; animation-duration: 8s; animation-delay: 0s;">â„</div>
    <div class="snowflake" style="left: 15%; animation-duration: 12s; animation-delay: 2s;">â…</div>
    <div class="snowflake" style="left: 25%; animation-duration: 10s; animation-delay: 4s;">â†</div>
    <div class="snowflake" style="left: 35%; animation-duration: 14s; animation-delay: 1s;">â„</div>
    <div class="snowflake" style="left: 45%; animation-duration: 9s; animation-delay: 3s;">â…</div>
    <div class="snowflake" style="left: 55%; animation-duration: 11s; animation-delay: 5s;">â†</div>
    <div class="snowflake" style="left: 65%; animation-duration: 13s; animation-delay: 2s;">â„</div>
    <div class="snowflake" style="left: 75%; animation-duration: 8s; animation-delay: 4s;">â…</div>
    <div class="snowflake" style="left: 85%; animation-duration: 10s; animation-delay: 0s;">â†</div>
    <div class="snowflake" style="left: 95%; animation-duration: 12s; animation-delay: 3s;">â„</div>
    <!-- Falling Gifts -->
    <div class="gift" style="left: 8%; animation-duration: 15s; animation-delay: 1s;">ğŸ</div>
    <div class="gift" style="left: 22%; animation-duration: 18s; animation-delay: 4s;">ğŸ€</div>
    <div class="gift" style="left: 38%; animation-duration: 20s; animation-delay: 7s;">ğŸ</div>
    <div class="gift" style="left: 52%; animation-duration: 16s; animation-delay: 2s;">ğŸ„</div>
    <div class="gift" style="left: 68%; animation-duration: 22s; animation-delay: 5s;">ğŸ</div>
    <div class="gift" style="left: 82%; animation-duration: 17s; animation-delay: 0s;">ğŸ€</div>
    <div class="gift" style="left: 92%; animation-duration: 19s; animation-delay: 8s;">ğŸ</div>
    {% elif theme == 'cookies' %}
    <!-- Cookie Rain -->
    <div id="cookie-rain"></div>
    <script>
      (function() {
        const cookieRain = document.getElementById('cookie-rain');
        const cookieEmojis = ['ğŸª', 'ğŸª', 'ğŸª', 'ğŸ¥›', 'ğŸª', 'ğŸ¥›', 'ğŸª', 'ğŸ¥›'];
        
        function createCookie() {
          const cookie = document.createElement('div');
          cookie.className = 'cookie';
          const emoji = cookieEmojis[Math.floor(Math.random() * cookieEmojis.length)];
          cookie.textContent = emoji;
          
          // Position alÃ©atoire
          const startX = Math.random() * 100;
          cookie.style.left = startX + '%';
          cookie.style.top = '-50px';
          
          // Taille alÃ©atoire (plus petite pour le lait)
          let size;
          if (emoji === 'ğŸ¥›') {
            size = Math.random() * 12 + 20; // Lait: 20-32px
          } else {
            size = Math.random() * 20 + 28; // Cookies: 28-48px
          }
          cookie.style.fontSize = size + 'px';
          
          // DurÃ©e alÃ©atoire
          const duration = Math.random() * 4 + 6;
          cookie.style.animationDuration = duration + 's';
          
          cookieRain.appendChild(cookie);
          
          // Supprimer aprÃ¨s l'animation
          setTimeout(() => {
            if (cookie.parentNode) {
              cookie.parentNode.removeChild(cookie);
            }
          }, duration * 1000 + 100);
        }
        
        // CrÃ©er des cookies initiaux
        for (let i = 0; i < 20; i++) {
          setTimeout(() => createCookie(), i * 150);
        }
        
        // Continuer Ã  crÃ©er des cookies
        setInterval(() => createCookie(), 600);
      })();
    </script>
    {% endif %}
    
    <div class="container">
      {% block content %}{% endblock %}
      <footer>
        {% if theme == 'christmas' %}
        ğŸ„ KINGSHOT Slot Booking Â© 2025 ğŸ… Merry Christmas! ğŸ„
        {% elif theme == 'cookies' %}
        <br>
        ğŸª KINGSHOT Slot Booking Â© 2026 ğŸ¥› Cookie Season! ğŸª
        {% else %}
        ğŸ‘‘ KINGSHOT Slot Booking Â© 2025 ğŸ‘‘
        {% endif %}
      </footer>
    </div>
    
    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
      // Initialiser Flatpickr pour tous les inputs date et time
      document.addEventListener('DOMContentLoaded', function() {
        // Date pickers
        flatpickr('input[type="date"]', {
          dateFormat: 'Y-m-d',
          altInput: true,
          altFormat: 'F j, Y',
          theme: 'dark',
          static: true
        });
        
        // Time pickers
        flatpickr('input[type="time"]', {
          enableTime: true,
          noCalendar: true,
          dateFormat: 'H:i',
          time_24hr: true,
          theme: 'dark',
          static: true
        });
      });
    </script>
  </body>
</html>
